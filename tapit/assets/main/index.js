System.register("chunks:///_virtual/AudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,r,i,u,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,u=e._decorator,c=e.AudioSource,l=e.Component}],execute:function(){var a,p,f,s,d,S,y,b,h,g,E;i._RF.push({},"05f8b/gkR1C3JNmmzn11Got","AudioController",void 0);var m=u.ccclass,v=u.property;e("AudioController",(a=m("AudioController"),p=v({type:c}),f=v({type:c}),s=v({type:c}),d=v({type:c}),a((b=t((y=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,n(t,"lose",b,r(t)),n(t,"bgMusicSource",h,r(t)),n(t,"tapSoundEffectSource",g,r(t)),n(t,"blockedSoundEffectSource",E,r(t)),t}o(t,e);var i=t.prototype;return i.onLoad=function(){},i.playLose=function(){this.lose.playOneShot(this.lose.clip,1)},i.update=function(e){},i.playBgMusic=function(){this.bgMusicSource.play()},i.playSoundEffect=function(e){e?this.tapSoundEffectSource.playOneShot(this.tapSoundEffectSource.clip,1):this.blockedSoundEffectSource.playOneShot(this.blockedSoundEffectSource.clip,1)},t}(l)).prototype,"lose",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(y.prototype,"bgMusicSource",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"tapSoundEffectSource",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(y.prototype,"blockedSoundEffectSource",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=y))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/BillboardHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,l,a,s,o,n,f,c,u,p,_,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.createClass,l=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,n=e.Vec4,f=e.Material,c=e.EffectAsset,u=e.utils,p=e.gfx,_=e.director,h=e.renderer,m=e.Billboard}],execute:function(){var y,b,d,O,g,M,A,T,v,w,z,B,P;s._RF.push({},"ecd21YFfUBBgI5u5Llh4q6d","BillboardHelper",void 0);var R=o.ccclass,F=o.property,I=o.executeInEditMode;e("BillboardHelper",(y=R("BillboardHelper"),b=I(!0),d=F({type:n,serializable:!0,step:.1}),O=F({type:n}),g=F({type:f,serializable:!0}),M=F({type:f,serializable:!0}),A=F({type:c,serializable:!0}),T=F({type:c,serializable:!0}),y(v=b((z=t((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this)._model=null,t._uniform=new n(1,1,0,0),t._mesh=null,t._texture=null,l(t,"_tillOffset",z,a(t)),l(t,"_material",B,a(t)),l(t,"_effect",P,a(t)),t}i(t,e);var s=t.prototype;return s._refreshMaterial=function(){this._mesh&&this._model&&this._material&&this._effect&&(this._material.initialize({effectAsset:this._effect,technique:1}),this._model.initSubModel(0,this._mesh.renderingSubMeshes[0],this._material),this._material.setProperty("cc_size_rotation",this._uniform),this._material.setProperty("mainTiling_Offset",this._tillOffset),this._texture&&this._material.setProperty("mainTexture",this._texture))},s.createModel=function(){this._mesh=u.createMesh({primitiveMode:p.PrimitiveMode.TRIANGLE_LIST,positions:[0,0,0,0,0,0,0,0,0,0,0,0],uvs:[0,0,1,0,0,1,1,1],colors:[128,128,128,255,128,128,128,255,128,128,128,255,128,128,128,255],attributes:[new p.Attribute(p.AttributeName.ATTR_POSITION,p.Format.RGB32F),new p.Attribute(p.AttributeName.ATTR_TEX_COORD,p.Format.RG32F),new p.Attribute(p.AttributeName.ATTR_COLOR,p.Format.RGBA8UI,!0)],indices:[0,2,1,1,2,3]},void 0,{calculateBounds:!1});var e=this._model=_.root.createModel(h.scene.Model);e.node=e.transform=this.node,this._refreshMaterial()},r(t,[{key:"tillOffset",get:function(){return this._tillOffset},set:function(e){this._tillOffset=e,this._material&&this._material.setProperty("mainTiling_Offset",this._tillOffset)}},{key:"material",get:function(){return this._material},set:function(e){e!==this._material&&(this._material=e,this._refreshMaterial())}},{key:"effect",get:function(){return this._effect},set:function(e){e!==this._effect&&(this._effect=e,this._refreshMaterial())}}]),t}(m)).prototype,"_tillOffset",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n(1,1,0,0)}}),t(w.prototype,"tillOffset",[O],Object.getOwnPropertyDescriptor(w.prototype,"tillOffset"),w.prototype),B=t(w.prototype,"_material",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(w.prototype,"material",[M],Object.getOwnPropertyDescriptor(w.prototype,"material"),w.prototype),P=t(w.prototype,"_effect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(w.prototype,"effect",[T],Object.getOwnPropertyDescriptor(w.prototype,"effect"),w.prototype),v=w))||v)||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/CubeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubeGroupController.ts"],(function(i){"use strict";var t,e,n,o,r,a,s,l,c,p,u,d,h,_,y,f,g,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,s=i.Vec3,l=i.CCInteger,c=i.CCFloat,p=i.Animation,u=i.RigidBody,d=i.PhysicsSystem,h=i.BoxCollider,_=i.tween,y=i.Tween,f=i.Component},function(i){g=i.CubeGroupController,m=i.CubeDirection}],execute:function(){var b,C,w,A,v,P,T,D,B,S,F,k,x;r._RF.push({},"6de5c4X/BtEDq5rFhSM82AR","CubeController",void 0);var G=a.ccclass,O=a.property;i("CubeController",(b=G("CubeController"),C=O({type:s}),w=O({type:l}),A=O({type:c}),v=O(l),P=O(l),b((B=t((D=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,n(t,"flySpeed",B,o(t)),n(t,"direction",S,o(t)),n(t,"tweenDuration",F,o(t)),n(t,"type",k,o(t)),n(t,"bigCubeFlatFacing",x,o(t)),t._animation=void 0,t._cubeGroupController=void 0,t._originPosition=new s(0,0,0),t._acceleration=new s(0,0,0),t._flyByDeltaTime=new s(0,0,0),t._nextPosition=new s(0,0,0),t._gameAcceleration=1,t._isTapped=void 0,t._flewTime=void 0,t._isBlocked=void 0,t._playedCorrectAnim=void 0,t._rigidBody=void 0,t}e(t,i);var r=t.prototype;return r.onLoad=function(){var i=this;this._flewTime=0,this.flySpeed=new s(0,0,0),this.tweenDuration=.1,this._playedCorrectAnim=!1,this._acceleration=this.findAcceleration(this.direction),this._animation=this.node.getComponent(p),this._originPosition=this.node.getPosition(),this._rigidBody=this.node.getComponent(u),this.node.on("tapped",(function(t){i._isTapped=!0,i._isBlocked=t,t||(i.playCorrectAnim(),i._cubeGroupController.playSfx(!0))}),this)},r.start=function(){var i=this;this._cubeGroupController=this.node.parent.getComponent(g),this._isTapped=!1,this.getComponent(u).useCCD=!0,d.instance.enable=!0;var t=this.getComponent(h);t&&(t.on("onCollisionEnter",(function(t){i._isTapped?(i.playBlockedAnim(),i.resetProps()):(i.playSpreadBlockedAnim(),i._cubeGroupController.playSfx(!1))})),t.on("onCollisionExit",(function(t){i._isBlocked=!1})))},r.update=function(i){if(this._isTapped){this._flewTime+=i,this._flewTime>1&&(this.node.removeFromParent(),this.destroy());var t=this.node.getPosition();s.multiplyScalar(this._flyByDeltaTime,this.flySpeed,i),s.add(this._nextPosition,t,this._flyByDeltaTime),this.node.setPosition(this._nextPosition),s.add(this.flySpeed,this.flySpeed,this._acceleration)}},r.playCorrectAnim=function(){this._animation&&this._animation.play("correct")},r.playTutAnim=function(){this._animation&&this._animation.play("correct");var i=new s(this._originPosition),t=new s(this._acceleration);s.add(i,i,s.multiplyScalar(t,t,2));var e="quartOut";_(this.node).delay(.2).to(.5,{position:i},{easing:e}).delay(.2).to(.5,{position:this._originPosition},{easing:e}).delay(.2).union().tag(0).repeatForever().start()},r.stopTutAnim=function(){y.stopAll(),this.node.setPosition(this._originPosition),this._animation.stop(),this._animation.play("idle")},r.playBlockedAnim=function(){var i=this;this._animation.play("blocked"),_(this.node.position).to(this.tweenDuration,this._originPosition,{easing:"sineInOut",onUpdate:function(t,e){i.node.position=t}}).start()},r.playSpreadBlockedAnim=function(){var i=this,t=this.findAcceleration(this._cubeGroupController.lastTappedCubeDirection),e=new s(0,0,0);s.multiplyScalar(t,t,.3),s.add(e,this.node.position,t),_(this.node.position).to(this.tweenDuration,e,{easing:"sineInOut",onUpdate:function(t,e){i.node.position=t}}).to(this.tweenDuration,this._originPosition,{easing:"sineInOut",onUpdate:function(t,e){i.node.position=t}}).start()},r.findAcceleration=function(i){var t=new s(0,0,0);switch(i){case m.UP:t.set(0,this._gameAcceleration,0);break;case m.DOWN:t.set(0,-this._gameAcceleration,0);break;case m.BACKWARD:t.set(0,0,this._gameAcceleration);break;case m.FORWARD:t.set(0,0,-this._gameAcceleration);break;case m.LEFT:t.set(-this._gameAcceleration,0,0);break;case m.RIGHT:t.set(this._gameAcceleration,0,0)}return t},r.getOriginPosition=function(){return this._originPosition},r.resetProps=function(){this._flewTime=0,this._isTapped=!1,this._isBlocked=!1,this._playedCorrectAnim=!1,this.flySpeed.set(0,0,0)},r.setCubeProperties=function(i){var t=i.direction,e=i.type,n=i.bigCubeFlatFacing;this.direction=t,this.type=e,this.bigCubeFlatFacing=n},r.popOutAnim=function(){console.log("pop out");var i=new s(5,0,0),t=this.node.getPosition();console.log(this.node.getWorldPosition());var e=new s;s.add(e,t,i),_(this.node).to(.1,{position:e}).delay(1.5).to(.5,{position:t},{easing:"quartIn"}).union().start()},t}(f)).prototype,"flySpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),S=t(D.prototype,"direction",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(D.prototype,"tweenDuration",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),k=t(D.prototype,"type",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(D.prototype,"bigCubeFlatFacing",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=D))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/CubeGroupController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubeController.ts","./AudioController.ts"],(function(e){"use strict";var t,i,o,r,c,n,s,a,u,h,b,C,l,P,p,f,k,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){c=e.cclegacy,n=e._decorator,s=e.EventTarget,a=e.CCInteger,u=e.Prefab,h=e.CCFloat,b=e.Node,C=e.find,l=e.Vec3,P=e.Quat,p=e.instantiate,f=e.Component},function(e){k=e.CubeController},function(e){_=e.AudioController}],execute:function(){var y,d,R,g,x,A,F,z,D,v,T,m,w,W,L,O,G,I,B;e("CubeDirection",void 0),c._RF.push({},"fb404hFh1VA+Jv2nC+DebnD","CubeGroupController",void 0);var S,E,N,X=n.ccclass,K=n.property;new s;!function(e){e[e.X_AXIS=0]="X_AXIS",e[e.Y_AXIS=1]="Y_AXIS"}(S||(S={})),function(e){e[e.SMALL=0]="SMALL",e[e.LONG=1]="LONG",e[e.BIG=2]="BIG"}(E||(E={})),function(e){e[e.NO_BLOCK=-1]="NO_BLOCK",e[e.DOWN=1]="DOWN",e[e.UP=2]="UP",e[e.BACKWARD=3]="BACKWARD",e[e.FORWARD=4]="FORWARD",e[e.LEFT=5]="LEFT",e[e.RIGHT=6]="RIGHT"}(N||(N=e("CubeDirection",{})));e("CubeGroupController",(y=X("CubeGroupController"),d=K({type:a}),R=K({type:_}),g=K({type:u}),x=K({type:u}),A=K({type:u}),F=K({type:h}),z=K({type:a}),D=K({type:[b]}),y((m=t((T=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),n=0;n<i;n++)c[n]=arguments[n];return(t=e.call.apply(e,[this].concat(c))||this).cubeIndex=276,o(t,"rotateSpeed",m,r(t)),o(t,"audioController",w,r(t)),o(t,"cube1x1Prefab",W,r(t)),o(t,"cube2x1Prefab",L,r(t)),o(t,"cube2x2Prefab",O,r(t)),o(t,"sensitivity",G,r(t)),o(t,"lastTappedCubeDirection",I,r(t)),o(t,"cubes",B,r(t)),t._cubesDataMatrixStore=[],t._currentRotation=new P,t._translationVector=new l,t._gameController=void 0,t._cubePositionChecker=void 0,t}i(t,e);var c=t.prototype;return c.start=function(){this._gameController=C("GameController").getComponent("GameController"),this._cubePositionChecker=[[[]]]},c.update=function(e){},c.handleTap=function(e){var t=this;e.sort((function(e,t){return e.distance-t.distance}));var i=e[0];this.cubes.forEach((function(e,o){i.collider.node!==e||t.emitTappedEvent(e)}))},c.emitTappedEvent=function(e){var t=this.isCubeBlocked(e);t||this.updateCheckerWhilePlaying(e.getComponent(k)),e.emit("tapped",t),this.lastTappedCubeDirection=e.getComponent(k).direction,this._gameController&&this._gameController.updateGameIq(!t)},c.isCubeBlocked=function(e){var t=e.getComponent(k);if(t){var i=new l(0,0,0),o=t.direction,r=new l(t.getOriginPosition());switch(l.subtract(r,r,this._translationVector),o){case N.DOWN:i.set(0,-1,0);break;case N.UP:i.set(0,1,0);break;case N.BACKWARD:i.set(0,0,1);break;case N.FORWARD:i.set(0,0,-1);break;case N.LEFT:i.set(-1,0,0);break;case N.RIGHT:i.set(1,0,0)}l.add(r,r,i);var c=0;try{switch(t.type){case E.SMALL:c=this._cubePositionChecker[r.y][r.x][r.z];break;case E.LONG:case E.BIG:l.add(r,r,i),c=this._cubePositionChecker[r.y][r.x][r.z]}}catch(e){return!1}for(;void 0!==c;){if(1===c)return!0;if(l.add(r,r,i),!this.checkerInBound(r))return!1;c=this._cubePositionChecker[r.y][r.x][r.z]}return!1}return!0},c.checkerInBound=function(e){return e.x>=0&&e.x<this._cubePositionChecker[0].length&&e.y>=0&&e.y<this._cubePositionChecker.length&&e.z>=0&&e.z<this._cubePositionChecker[0][0].length},c.rotateGroup=function(e,t,i){this._currentRotation=this.node.getRotation();var o=e.x,r=e.y,c=(r=-r)*this.sensitivity,n=o*this.sensitivity,s=new P,a=this.calRotationVector(new l(0,1,0),i);P.rotateAround(s,s,a,n);var u=new P,h=this.calRotationVector(new l(1,0,0),i);P.rotateAround(u,u,h,c),P.multiply(this._currentRotation,this._currentRotation,u),P.multiply(this._currentRotation,this._currentRotation,s),this.node.setRotation(this._currentRotation)},c.calRotationVector=function(e,t){var i=new P;return P.invert(i,this._currentRotation),l.transformQuat(e,e,t),l.transformQuat(e,e,i),e},c.initCubeGroup=function(e){var t=e.split("|").map(Number),i=t.slice(0,4),o=t.slice(4);this.createCubeDataMatrixStore(i,o),this.spawnCubeGroup()},c.spawnCubeGroup=function(){var e=this;this._cubesDataMatrixStore.forEach((function(t,i){if(t.hasCube){var o=e.spawnCube(t);e.node.addChild(o),e.cubes.push(o)}}))},c.spawnCube=function(e){if(!this.cube1x1Prefab&&!this.cube2x1Prefab&&!this.cube2x2Prefab)return null;var t=null;t=e.cubeType===E.SMALL?p(this.cube1x1Prefab):e.cubeType===E.LONG?p(this.cube2x1Prefab):p(this.cube2x2Prefab);var i=new l(e.xPos,e.yPos,e.zPos);return t.getComponent(k).setCubeProperties({direction:e.direction,type:e.cubeType,bigCubeFlatFacing:e.bigCubeFlatFacing}),l.add(i,i,this._translationVector),t.setPosition(i),e.bigCubeFlatFacing===S.Y_AXIS&&P.rotateY(e.rotation,e.rotation,-Math.PI/2),t.setRotation(e.rotation),t},c.setCameraAngel=function(e){},c.createCubeDataMatrixStore=function(e,t){for(var i=e[1],o=e[2],r=e[3],c=0,n=new l(o/2-.5,r/2-.5,i/2-.5),s=0;s<r;s++){this._cubePositionChecker[s]=[];for(var a=0;a<o;a++){this._cubePositionChecker[s][a]=[];for(var u=0;u<i;u++)this._cubePositionChecker[s][a][u]=0}}l.subtract(this._translationVector,this._translationVector,n);for(var h=0;h<r;h++)for(var b=0;b<o;b++)for(var C=0;C<i;C++)if(1!==this._cubePositionChecker[h][b][C]){var p={hasCube:!1,xPos:0,yPos:0,zPos:0,direction:0,cubeType:0,bigCubeFlatFacing:-1,rotation:new P};if(-1===t[c])this._cubesDataMatrixStore.push(p);else{p.hasCube=!0,p.cubeType=Math.ceil(t[c]/6)-1,p.direction=t[c]-6*p.cubeType,p.cubeType===E.BIG?p.bigCubeFlatFacing=S.X_AXIS:p.cubeType>E.BIG&&(p.bigCubeFlatFacing=S.Y_AXIS,p.cubeType=E.BIG),p.rotation=this.calCubeRotation(p.direction);var f=this.updateCubePositionChecker(b,h,C,p.cubeType,p.direction,p.bigCubeFlatFacing);p.xPos=f.x,p.yPos=f.y,p.zPos=f.z,this._cubesDataMatrixStore.push(p)}if(++c>=t.length)break}},c.updateCheckerWhilePlaying=function(e){var t=new l(e.getOriginPosition());switch(l.subtract(t,t,this._translationVector),e.type){case E.SMALL:this._cubePositionChecker[t.y][t.x][t.z]=0;break;case E.LONG:this.updateCheckerForLongCube(e,t);break;case E.BIG:this.updateCheckerForBigCube(e,t)}},c.updateCheckerForLongCube=function(e,t){switch(e.direction){case N.UP:case N.DOWN:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y+1][t.x][t.z]=0;break;case N.BACKWARD:case N.FORWARD:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y][t.x][t.z+1]=0;break;case N.LEFT:case N.RIGHT:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y][t.x+1][t.z]=0}},c.updateCheckerForBigCube=function(e,t){if(e.bigCubeFlatFacing===S.X_AXIS)switch(e.direction){case N.DOWN:case N.UP:case N.LEFT:case N.RIGHT:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y][t.x+1][t.z]=0,this._cubePositionChecker[t.y+1][t.x+1][t.z]=0,this._cubePositionChecker[t.y+1][t.x][t.z]=0;break;case N.BACKWARD:case N.FORWARD:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y][t.x+1][t.z]=0,this._cubePositionChecker[t.y][t.x+1][t.z+1]=0,this._cubePositionChecker[t.y][t.x][t.z+1]=0}else switch(e.direction){case N.DOWN:case N.UP:case N.BACKWARD:case N.FORWARD:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y][t.x][t.z+1]=0,this._cubePositionChecker[t.y+1][t.x][t.z+1]=0,this._cubePositionChecker[t.y+1][t.x][t.z]=0;break;case N.LEFT:case N.RIGHT:this._cubePositionChecker[t.y][t.x][t.z]=0,this._cubePositionChecker[t.y][t.x+1][t.z]=0,this._cubePositionChecker[t.y][t.x+1][t.z+1]=0,this._cubePositionChecker[t.y][t.x][t.z+1]=0}},c.updateCubePositionChecker=function(e,t,i,o,r,c){var n={x:e,y:t,z:i};switch(o){case E.SMALL:return this._cubePositionChecker[t][e][i]=1,n;case E.LONG:this.calcPositionCheckerForLongCube(e,t,i,r),n=this.calcCorrectPositionForLongCube(e,t,i,r);break;case E.BIG:this.calcPositionCheckerForBigCube(e,t,i,r,c),n=this.calcCorrectPositionForBigCube(e,t,i,r,c)}return n},c.calcPositionCheckerForLongCube=function(e,t,i,o){o===N.UP||o===N.DOWN?(this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t+1][e][i]=1):o===N.BACKWARD||o===N.FORWARD?(this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t][e][i+1]=1):(this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t][e+1][i]=1)},c.calcCorrectPositionForLongCube=function(e,t,i,o){switch(o){case N.UP:case N.RIGHT:case N.BACKWARD:return{x:e,y:t,z:i};case N.DOWN:return{x:e,y:t+1,z:i};case N.LEFT:return{x:e+1,y:t,z:i};case N.FORWARD:return{x:e,y:t,z:i+1}}},c.calcPositionCheckerForBigCube=function(e,t,i,o,r){if(r===S.X_AXIS)switch(o){case N.DOWN:case N.UP:case N.LEFT:case N.RIGHT:this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t][e+1][i]=1,this._cubePositionChecker[t+1][e+1][i]=1,this._cubePositionChecker[t+1][e][i]=1;break;case N.BACKWARD:case N.FORWARD:this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t][e+1][i]=1,this._cubePositionChecker[t][e+1][i+1]=1,this._cubePositionChecker[t][e][i+1]=1}else switch(o){case N.DOWN:case N.UP:case N.BACKWARD:case N.FORWARD:this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t][e][i+1]=1,this._cubePositionChecker[t+1][e][i+1]=1,this._cubePositionChecker[t+1][e][i]=1;break;case N.LEFT:case N.RIGHT:this._cubePositionChecker[t][e][i]=1,this._cubePositionChecker[t][e+1][i]=1,this._cubePositionChecker[t][e+1][i+1]=1,this._cubePositionChecker[t][e][i+1]=1}},c.calcCorrectPositionForBigCube=function(e,t,i,o,r){var c={x:e,y:t,z:i};if(r===S.X_AXIS)switch(o){case N.UP:case N.BACKWARD:break;case N.LEFT:c={x:e+1,y:t,z:i};break;case N.DOWN:case N.RIGHT:c={x:e,y:t+1,z:i};break;case N.FORWARD:c={x:e,y:t,z:i+1}}else switch(o){case N.RIGHT:case N.UP:break;case N.BACKWARD:c={x:e,y:t+1,z:i};break;case N.DOWN:c={x:e,y:t+1,z:i+1};break;case N.LEFT:c={x:e+1,y:t,z:i};break;case N.FORWARD:return{x:e,y:t,z:i+1}}return c},c.calCubeRotation=function(e){var t=new P;switch(e){case N.DOWN:P.fromEuler(t,180,0,0);break;case N.UP:P.fromEuler(t,0,0,0);break;case N.BACKWARD:P.fromEuler(t,90,0,0);break;case N.FORWARD:P.fromEuler(t,-90,0,0);break;case N.LEFT:P.fromEuler(t,0,0,90);break;case N.RIGHT:P.fromEuler(t,0,0,-90)}return t},c.startCubeTutAnim=function(){this.cubes[this.cubes.length-1].getComponent(k).playTutAnim()},c.stopCubeTutAnim=function(){this.cubes[this.cubes.length-1].getComponent(k).stopTutAnim()},c.playSfx=function(e){this.audioController.playSoundEffect(e)},t}(f)).prototype,"rotateSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=t(T.prototype,"audioController",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(T.prototype,"cube1x1Prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"cube2x1Prefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(T.prototype,"cube2x2Prefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(T.prototype,"sensitivity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.005}}),I=t(T.prototype,"lastTappedCubeDirection",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=t(T.prototype,"cubes",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=T))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/EndCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./h5SdkHelper.ts"],(function(t){"use strict";var e,n,o,r,i,a,c,s,u,l,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.Node,s=t.Vec3,u=t.tween,l=t.Component},function(t){d=t.default}],execute:function(){var p,f,h,y,C;i._RF.push({},"7de01+Nt5VHX4nPhGJk/Y9s","EndCard",void 0);var T=a.ccclass,v=a.property;t("EndCard",(p=T("EndCard"),f=v(c),p((C=e((y=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"CTAButton",C,r(e)),e}n(e,t);var i=e.prototype;return i.onload=function(){},i.start=function(){this.node.scale=new s(0,0,0),this.CTAButton.on(c.EventType.TOUCH_START,this.redirectToStore,this)},i.update=function(t){},i.playCTAButtonAnim=function(){console.log("play cta button anim");var t=new s(1.05,1.05,1.05),e=new s(1,1,1);u(this.CTAButton).tag(1).to(.3,{scale:t}).to(.3,{scale:e}).union().repeatForever().start()},i.redirectToStore=function(){d.redirect(),d.gameEnd()},i.showEndCard=function(){u(this.node).to(.5,{scale:new s(1,1,1)},{easing:"backOut"}).start(),this.playCTAButtonAnim()},e}(l)).prototype,"CTAButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CubeGroupController.ts","./EndCard.ts","./AudioController.ts","./UIComponent.ts","./h5SdkHelper.ts"],(function(t){"use strict";var e,o,i,n,r,a,s,u,c,l,h,p,m,d,g,_,C,b,f,T,y,G,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.CCInteger,u=t.CCFloat,c=t.CCString,l=t.Camera,h=t.Node,p=t.Vec3,m=t.input,d=t.Input,g=t.PhysicsSystem,_=t.geometry,C=t.Quat,b=t.Component},function(t){f=t.CubeGroupController},function(t){T=t.EndCard},function(t){y=t.AudioController},function(t){G=t.UIComponent},function(t){v=t.default}],execute:function(){var w,z,P,E,I,S,O,D,A,U,M,R,L,N,q,H,k,V,Z,j,F,K,x;r._RF.push({},"93fbaKk8KdH+7IyMGST3zeK","GameController",void 0);var B,Q=a.ccclass,X=a.property;!function(t){t[t.NONE=0]="NONE",t[t.DRAG=1]="DRAG",t[t.ZOOM=2]="ZOOM"}(B||(B={}));t("GameController",(w=Q("GameController"),z=X(y),P=X({type:s}),E=X({type:u}),I=X({type:s}),S=X({type:c}),O=X({type:f}),D=X({type:l}),A=X({type:G}),U=X({type:T}),M=X({type:h}),w((N=e((L=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).endStartSceneTime=2.3,i(e,"audioController",N,n(e)),i(e,"iq",q,n(e)),i(e,"zoomSpeed",H,n(e)),i(e,"timeLimit",k,n(e)),i(e,"levelMap",V,n(e)),i(e,"cubeGroup",Z,n(e)),i(e,"cameraComponent",j,n(e)),i(e,"UIComponent",F,n(e)),i(e,"endCard",K,n(e)),i(e,"jasmine",x,n(e)),e._touchGesture=void 0,e._zoomGesturePrevDistance=void 0,e._isDragging=void 0,e._isTouched=void 0,e._isInteracted=void 0,e._showEndCard=void 0,e._totalPlayingTime=void 0,e._startSceneTimeCounter=void 0,e._ray=new _.Ray,e._cameraPosition=new p,e._cameraRotation=new C,e._originToCameraVector=new p,e._cubeGroupPosition=new p,e._defaultCameraPosition=new p(24.882,15.808,14.836),e}o(e,t);var r=e.prototype;return r.onLoad=function(){v.setStoreUrl("https://apps.apple.com/app/tap-it-3d-tap-blocks-out/id6447929980","https://play.google.com/store/apps/details?id=tap.it.away.block.taptile3d.tile.master&hl=en&gl=US"),this._isTouched=!1,this._touchGesture=B.NONE,this._isInteracted=!1,this._totalPlayingTime=0,this._showEndCard=!1,this._startSceneTimeCounter=0},r.start=function(){this._cameraRotation=this.cameraComponent.node.getRotation(),this._cameraPosition=this.cameraComponent.node.getPosition(),this.cubeGroup.initCubeGroup(this.levelMap),this._cubeGroupPosition=this.cubeGroup.node.getPosition(),this.UIComponent.updateIq(this.iq);var t=new p(0,0,-10);p.subtract(this._originToCameraVector,t,this._cameraPosition),this._originToCameraVector.normalize(),this.startTutAnim(),m.on(d.EventType.TOUCH_START,this.onTouchStart,this),m.on(d.EventType.TOUCH_MOVE,this.onTouchMove,this),m.on(d.EventType.TOUCH_END,this.onTouchEnd,this),v.gameStart()},r.update=function(t){this._totalPlayingTime+=t,this._totalPlayingTime>=this.timeLimit&&!this._showEndCard&&(this._showEndCard=!0,this.audioController.playLose(),this.showEndCard())},r.gameOver=function(){},r.onTouchStart=function(t){this._isTouched=!0,this._isInteracted||(this.stopTutAnim(),this._isInteracted=!0);var e=t.getAllTouches();if(1===e.length)this._touchGesture=B.DRAG;else if(2===e.length&&this._touchGesture!==B.NONE){this._touchGesture=B.ZOOM;var o=t.getAllTouches(),i=o[0],n=o[1],r=i.getUILocation(),a=n.getUILocation();this._zoomGesturePrevDistance=r.subtract(a).length()}},r.onTouchMove=function(t){switch(this._touchGesture){case B.DRAG:this._isDragging?this.cubeGroup.rotateGroup(t.getDelta(),this._cameraPosition,this._cameraRotation):this._isTouched&&this.isRealMove(t.getDelta())&&(this._isDragging=!0);break;case B.ZOOM:this.handleZoom(t)}},r.onTouchEnd=function(t){this._isDragging||this._touchGesture!==B.DRAG||(this.cameraComponent.screenPointToRay(t.getLocationX(),t.getLocationY(),this._ray),g.instance.raycast(this._ray)&&this.cubeGroup.handleTap(g.instance.raycastResults)),this.resetToucheStates()},r.handleZoom=function(t){var e=t.getAllTouches(),o=e[0],i=e[1],n=o.getUILocation(),r=i.getUILocation(),a=Math.round(n.subtract(r).length());console.log("distance",a),console.log("prev distance",this._zoomGesturePrevDistance),a>this._zoomGesturePrevDistance?this.zoomIn():a<this._zoomGesturePrevDistance&&this.zoomOut(),this._zoomGesturePrevDistance=a},r.zoomOut=function(){console.log("zooming out");var t=new p(this._cubeGroupPosition),e=new p(-.1,-.1,-.1);p.multiplyScalar(e,e,this.zoomSpeed),p.add(t,t,e),console.log(t),this._cubeGroupPosition=t,this.cubeGroup.node.setPosition(t)},r.zoomIn=function(){console.log("zooming in");var t=new p(this._cubeGroupPosition),e=new p(.1,.1,.1);p.multiplyScalar(e,e,this.zoomSpeed),p.add(t,t,e),console.log(t),this._cubeGroupPosition=t,this.cubeGroup.node.setPosition(t)},r.isRealMove=function(t){return Math.abs(t.x)>2||Math.abs(t.y)>2},r.resetToucheStates=function(){this._isDragging=!1,this._touchGesture=B.NONE,this._isTouched=!1},r.updateGameIq=function(t){this.iq=t?this.iq+5:this.iq-5,this.UIComponent.updateIq(this.iq)},r.showEndCard=function(){console.log("show end card"),this.endCard&&(this.UIComponent.node.active=!0,this.endCard.showEndCard(),m.off(d.EventType.TOUCH_START,this.onTouchStart,this),m.off(d.EventType.TOUCH_MOVE,this.onTouchMove,this),m.off(d.EventType.TOUCH_END,this.onTouchEnd,this))},r.startTutAnim=function(){this.UIComponent.playTutHandAnim(),this.cubeGroup.startCubeTutAnim()},r.stopTutAnim=function(){this.UIComponent.stopTutAnim(),this.cubeGroup.stopCubeTutAnim()},e}(b)).prototype,"audioController",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(L.prototype,"iq",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),H=e(L.prototype,"zoomSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.001}}),k=e(L.prototype,"timeLimit",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),V=e(L.prototype,"levelMap",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1|1|1|1|-1"}}),Z=e(L.prototype,"cubeGroup",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(L.prototype,"cameraComponent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(L.prototype,"UIComponent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(L.prototype,"endCard",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(L.prototype,"jasmine",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=L))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/h5SdkHelper.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3a85bUWirlPqakXY1DbOIoQ","h5SdkHelper",void 0);e("default",new(function(){function e(){}var t=e.prototype;return t.redirect=function(){console.log("download"),window.super_html&&super_html.download(),"undefined"!=typeof redirectStore&&redirectStore()},t.gameStart=function(){console.log("game start"),"undefined"!=typeof onGameReady&&onGameReady(),"undefined"!=typeof startGame&&startGame()},t.gameEnd=function(){console.log("game end"),window.super_html&&super_html.game_end(),"undefined"!=typeof onGameEnd&&onGameEnd()},t.setStoreUrl=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){console.log("set store url"),window.super_html&&(super_html.google_play_url=t),window.super_html&&(super_html.appstore_url=e),"undefined"!=typeof setStoreUrl&&setStoreUrl(e,t)})),e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioController.ts","./CubeController.ts","./CubeGroupController.ts","./EndCard.ts","./GameController.ts","./UIComponent.ts","./BillboardHelper.ts","./h5SdkHelper.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/UIComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i,r,a,u,s,l,c,p,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Label,s=t.Node,l=t.Vec3,c=t.tween,p=t.Tween,d=t.Component}],execute:function(){var f,h,y,m,b,g,v;r._RF.push({},"a13f2nr/DNLALphO7OKBbYu","UIComponent",void 0);var H=a.ccclass,L=a.property;t("UIComponent",(f=H("UIComponent"),h=L({type:u}),y=L(s),f((g=n((b=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"iqCounterLabel",g,i(n)),o(n,"tutHand",v,i(n)),n}e(n,t);var r=n.prototype;return r.onLoad=function(){},r.start=function(){},r.update=function(t){},r.updateIq=function(t){this.iqCounterLabel.string=""+t},r.playTutHandAnim=function(){if(console.log("play tut hand anim",this.tutHand),this.tutHand){var t=new l(1.05,1.05,1.05),n=new l(1,1,1),e=this.tutHand.getPosition(),o=new l(e.x,e.y,e.z);c(this.tutHand).tag(1).to(.3,{scale:t,position:o}).to(.3,{scale:n,position:e}).union().repeatForever().start()}},r.stopTutAnim=function(){console.log("stop tut anim"),p.stopAllByTag(1),this.tutHand.destroy(),this.tutHand.removeFromParent()},n}(d)).prototype,"iqCounterLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"tutHand",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=b))||m));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});